<div class="row">
  <div class="col-md-4 my-auto">
    <input type="text" [(ngModel)]="searchObject.searchParam" name="searchParam" class="form-control input-search-admin"
      placeholder="Tìm Kiếm">
  </div>
  <div class="col-md-1">
    <button class="btn btn-success w-150" (click)="search(searchObject)">Tìm kiếm</button>
  </div>
</div>
<div class="row mt-2">
  <div class="col-md-11">
    <small>
      <a href="javascript:void(0)" (click)="table.rowDetail.expandAllRows()">Hiển thị tất cả</a> |
      <a href="javascript:void(0)" (click)="table.rowDetail.collapseAllRows()">Thu gọn</a>
    </small>
  </div>
</div>

<!-- ======================================= Balance ========================================== -->

<div class="row mt-2" [ngClass]="'d-block'">
  <div class="col">
    <div class="balance">Balance</div>
    <ngx-datatable #myTable class='material expandable' [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
      [rowHeight]="50" [rows]='listBalance' [sorts]="[{prop: 'accountId', dir: 'desc'}]" [limit]="5">
      <!-- Row Detail Template -->
      <ngx-datatable-row-detail [rowHeight]="150" #myDetailRow>
        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-row-detail-template>
          <div style="padding-left:35px;">
            <div class="container">
              <u><i>Thông tin chi tiết:</i></u>
              <div class="row mt-3">
                <div *ngFor="let el of keyArr"> 
                  <div>Reserve: {{row.balance[el].Reserve}}</div>                         
                   <div>Gross: {{row.balance[el].Gross}}</div> 
                   <div>Gross: {{row.balance[el].Consume}}</div>                     
                </div>
              </div>
              <div class="row mt-3">
                <strong class="col-2 text-right">- BalType: </strong>
                <div class="col-2">{{row.BalType}}</div>
                <strong class="col-2 text-right">- AcctNumber: </strong>
                <div class="col-2">{{row.AcctNumber}}</div>
                <strong class="col-2 text-right">- ExpDate: </strong>
                <div class="col-2">{{row.ExpDate}}</div>
              </div>
            </div>
          </div>
        </ng-template>
      </ngx-datatable-row-detail>
      <!-- Column Templates -->
      <ngx-datatable-column [width]="10" [resizeable]="false" [sortable]="true" [draggable]="false" [canAutoResize]="false">
        <ng-template let-row="row" let-expanded="expanded" ngx-datatable-cell-template>
          <a href="javascript:void(0)" [class.datatable-icon-right]="!expanded" [class.datatable-icon-down]="expanded"
            title="Expand/Collapse Row" (click)="toggleExpandRow(row)">
          </a>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="Index" [minWidth]="60" [maxWidth]="60">
        <ng-template let-column="column" ngx-datatable-header-template>
          <span class="default">
            <strong>STT</strong>
          </span>
        </ng-template>
        <ng-template let-rowIndex="rowIndex" let-row="row" ngx-datatable-cell-template>
          <strong>{{rowIndex+1}}</strong>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="accountId" [width]="80" [maxWidth]="80">
        <ng-template ngx-datatable-header-template>
          <span>
            <strong>ID</strong>
          </span>
        </ng-template>
        <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
          <strong class="cangiua">{{value}}</strong>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="balance" [width]="150">
        <ng-template ngx-datatable-header-template>
          <span>Cân đối</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          <strong class="cangiua">{{value| json}}</strong>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="debt" [width]="100">
        <ng-template ngx-datatable-header-template>
          <span>Số tiền còn nợ</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          <strong class="cangiua">{{value}}</strong>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column name="code" [width]="150">
        <ng-template ngx-datatable-header-template>
          <span>Mã rút tiền</span>
        </ng-template>
        <ng-template let-value="value" ngx-datatable-cell-template>
          <strong class="cangiua">{{value}}</strong>
        </ng-template>
      </ngx-datatable-column>
    </ngx-datatable>
  </div>
</div>